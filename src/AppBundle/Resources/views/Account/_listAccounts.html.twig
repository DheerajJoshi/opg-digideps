{% set translationDomain = "report-accounts" %}
{% trans_default_domain translationDomain %}

<ul class="behat-region-list-accounts report-list report-list--accounts">
    {% for account in accounts %}
        {% set linkToAccountPage = path('account', {'reportId': report.id, 'accountId': account.id}) %}
        <li class="report-list__item">
            <dl class="report-list__item-fields">
                <div class="report-list__item-fields-col-bank">
                    <dt class="visuallyhidden">{{ 'listing.bank' | trans }}</dt>
                    <dd class="report-list__item-fields-description">
                        <h3>
                            <a href="{{ linkToAccountPage }}" class="behat-link-account-n{{loop.index}}">
                                {{ account.bank }}
                            </a>
                        </h3>
                    </dd>
                    {% if report.isDue and account.closingBalance is null %}
                    <dd style="border-left: #c0c0c0 5px solid; padding-left: 10px;">
                      <a href="{{ linkToAccountPage }}#closing-balance">
                      {{ 'listing.addClosingBalanceWarning' | trans }} 
                      </a>
                    </dd>
                    {% endif %}
                </div>
                <div class="report-list__item-fields-col-acc-num">
                    <dt class="visuallyhidden">{{ 'listing.accountNumber' | trans }}</dt>
                    <dd class="report-list__item-fields-description report-list__item-fields-description--normal">&bull;&bull;&bull;&bull;{{ account.accountNumber }}</dd>
                </div>
                <div class="report-list__item-fields-col-info">
                    <div>
                        <dt class="report-list__item-fields-term">{{ 'listing.totalBalance' | trans }}</dt>
                        <dd class="report-list__item-fields-description report-list__item-fields-description--normal">
                            {{ 'listing.currencySymbol' | trans }}{{ account.moneyTotal | number_format(2, '.', ',') }}</dd>
                    </div>
                    {% if account.lastEdit %}
                     <div>
                        <dt class="report-list__item-fields-term">{{ 'listing.lastEdited' | trans }}</dt>
                        <dd class="report-list__item-fields-description report-list__item-fields-description--normal">{{ account.lastEdit | date("d/m/Y") }}</dd>
                     </div>
                    {% else %}
                     <div>
                        <dt class="report-list__item-fields-term">{{ 'listing.created' | trans }}</dt>
                        <dd class="report-list__item-fields-description report-list__item-fields-description--normal">{{ account.createdAt | date("d/m/Y") }}</dd>
                     </div>  
                    {% endif %}
                    {% if account.closingBalance %}
                    <div>
                        <dt class="report-list__item-fields-term">{{ 'listing.closingBalance' | trans }}</dt>
                        <dd class="report-list__item-fields-description report-list__item-fields-description--normal">{{ account.closingBalance | number_format(2, '.', ',') }}</dd>
                    </div>
                    {% endif %}
                    {% if account.closingDate %}
                      <div>
                        <dt class="report-list__item-fields-term">{{ 'listing.closingDate' | trans }}</dt>
                        <dd class="report-list__item-fields-description report-list__item-fields-description--normal">{{ account.closingDate | date("d/m/Y") }}</dd>
                    </div>
                    {% endif %} 
                </div>
            </dl>

        </li>
    {% endfor %}
</ul>
