{% set translationDomain = "report-overview" %}
{% trans_default_domain translationDomain %}

<ul id="overview-sections" class="overview-sections">

    <li id="planning-section" class="overview-section">
        <h2 class="heading">{{ 'planningTitle' | trans() }}</h2>
        {% include 'AppBundle:Overview:_subsection.html.twig' with {
            transDomain: translationDomain,
            subSection: 'decisions',
            report: report,
            guidance: true,
            state: reportStatus.decisionsState,
            status: reportStatus.decisionsStatus,
            list: true
        } %}
        {% include 'AppBundle:Overview:_subsection.html.twig' with {
            transDomain: translationDomain,
            subSection: 'contacts',
            report: report,
            guidance: true,
            list: true,
            info: true,
            state: reportStatus.contactsState,
            status: reportStatus.contactsStatus
        } %}
    </li>

    <li id="welfare-section" class="overview-section">
        <h2 class="heading">{{ 'careAndWelfare' | trans() }}</h2>
        {% include 'AppBundle:Overview:_subsection.html.twig' with {
            transDomain: translationDomain,
            subSection: 'safeguarding',
            report: report,
            info: true,
            guidance: true,
            state: reportStatus.safeguardingState,
            status: reportStatus.safeguardingStatus
        } %}
    </li>

    {% if report.courtOrderType == constant('AppBundle\\Entity\\Report::PROPERTY_AND_AFFAIRS') %}
        <li id="finances-section" class="overview-section">
            <h2 class="heading">{{ 'finances' | trans() }}</h2>
            {% include 'AppBundle:Overview:_subsection.html.twig' with {
                transDomain: translationDomain,
                subSection: 'accounts',
                report: report,
                state: reportStatus.accountsState,
                status: reportStatus.accountsStatus,
                warning: true,
                guidance: true
            } %}
            {% include 'AppBundle:Overview:_subsection.html.twig' with {
                transDomain: translationDomain,
                subSection: 'assets',
                report: report,
                state: reportStatus.assetsState,
                status: reportStatus.assetsStatus,
                list: true,
                guidance: true
            } %}
        </li>
    {% endif %}
    
    {% if reportStatus.isReadyToSubmit and report.isDue %}
        <li id="report-submit-section" class="overview-section">
            <h2 class="heading">{{ 'finishYourReport' | trans() }}</h2>
            {% include 'AppBundle:Overview:_subsection.html.twig' with {
                transDomain: translationDomain,
                subSection: 'report_add_further_info',
                report: report,
                guidance: false,
                state: "not-started",
                status: "Not started"
            } %}
        </li>
    {%  else %}
        <li id="report-submit-section" class="overview-section inactive">
            <h2 class="heading">{{ 'finishYourReport' | trans() }}</h2>
            {% include 'AppBundle:Overview:_subsection.html.twig' with {
                transDomain: translationDomain,
                subSection: 'report_add_further_info',
                report: report,
                guidance: false,
                state: "not-started",
                status: "Not started",
                disableedit: true 
            } %}
        </li>
    {%  endif %}
</ul>
<script>
    $( document ).ready(function() {
        $('.sub-section').each(function(index,element) {
            opg.accordian({
                target: element,
                open: false
            });
        });
    });
</script>
