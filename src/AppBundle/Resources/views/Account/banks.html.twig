{% embed 'AppBundle:Layouts:report_left_nav.html.twig' %}

    {% set translationDomain = "report-accounts" %}
    {% trans_default_domain translationDomain %}

    {% block pageTitle %}{{ 'page.htmlTitle' | trans }}{% endblock %}
    {% block title %}{{ 'page.pageSectionTitle' | trans }}{% endblock %}

    {% block leftcontent %}
        {% include 'AppBundle:Account:left-nav.html.twig'%}
    {% endblock %}
    
    {% block maincontent %}

        <h3 class="heading-medium-large">{{ 'banks.pageSectionTitle' | trans({'%client%':client.firstname}, translationDomain) }}</h3>
        <p class="page-section-description">{{ 'banks.pageSectionDescription' | trans({'%client%':client.firstname}, translationDomain) }}</p>
        
        {% embed 'AppBundle:Components/Listing:_card_list.html.twig' %}
            {% block list %}

                {% if accounts is not empty %}
                    {% for account in accounts %}
                        {% include 'AppBundle:Account:bank-list-item.html.twig' with {
                            account: account,
                            report: report
                        }%}
                    {% endfor %}
                {% endif %}
                <li class="card-item">
                    <a href="{{ path('add_account' , {'reportId': report.id}) }}" class="card add">Add account</a>
                    <div class="meta-data"></div>
                </li>
            {% endblock %}
            
        {% endembed %}
        
        {% if accounts is not empty %}
        
            <dl class="labelvalue right-inline transaction big-value">
                <dt class="label">{{ 'banks.totalBalance' | trans }}:</dt>

                {% if report.accountsClosingBalanceTotal == null %}
                    <dd class="value unknown">
                         {{ 'banks.balanceUnknown' | trans({}, translationDomain) }}
                    </dd>
                {% else %}
                   <dd class="value">
                     {{ 'currencySymbol' | trans({}, translationDomain) }}
                     {{ report.accountsClosingBalanceTotal | number_format(2, '.', ',') }}
                   </dd>
                {% endif %}

                </dd>
            </dl>

            {% if report.accountsClosingBalanceTotal == null %} 
             <dl>
                <div class="balance-warning page-section-warning">
                    <span class="icon icon__notification_yellow_small"></span>
                    <span class="page-section-description left-margin big">{{ 'banks.balanceMissingWarningBottom' | trans({
                        '%date%': report.endDate | date("j M Y"),
                        '%client%': client.firstname
                    }, translationDomain) | nl2br }}</span>  
                </div>
             </dl>
            {% endif %}

          {% endif %}
    
    {% endblock %}

    {% block pageBodyFooterNav %}
        {% include 'AppBundle:Components:nextprevious.html.twig' with {
        'previousLink': path("safeguarding" , {'reportId': report.id }),
        'previousLabel': 'Safeguarding',
        'nextLink': path("accounts_moneyin" , {'reportId': report.id }),
        'nextLabel': 'Money in'
        } %}
    {% endblock %}


{% endembed %}
