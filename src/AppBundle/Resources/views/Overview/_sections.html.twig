{% set translationDomain = "overview" %}
{% trans_default_domain translationDomain %}

<ul id="overview-sections" class="overview-sections">

    <li id="planning-section" class="overview-section">
        <h2 class="heading">{{ 'heading.planningTitle' | trans() }}</h2>
        {% include 'AppBundle:Overview:_subsection.html.twig' with {
            transDomain: translationDomain,
            subSection: 'decisions',
            report: report,
            description: true,
            state: reportStatus.decisionsState,
            status: reportStatus.decisionsStatus,
            list: true
        } %}
        {% include 'AppBundle:Overview:_subsection.html.twig' with {
            transDomain: translationDomain,
            subSection: 'contacts',
            report: report,
            description: true,
            list: true,
            info: true,
            state: reportStatus.contactsState,
            status: reportStatus.contactsStatus
        } %}
    </li>

    <li id="welfare-section" class="overview-section">
        <h2 class="heading">{{ 'heading.careAndWelfare' | trans() }}</h2>
        {% include 'AppBundle:Overview:_subsection.html.twig' with {
            transDomain: translationDomain,
            subSection: 'safeguarding',
            report: report,
            info: true,
            description: true,
            state: reportStatus.safeguardingState,
            status: reportStatus.safeguardingStatus
        } %}
    </li>

    {% if report.courtOrderType == constant('AppBundle\\Entity\\Report::PROPERTY_AND_AFFAIRS') %}
        <li id="finances-section" class="overview-section">
            <h2 class="heading">{{ 'heading.finances' | trans() }}</h2>
            {% include 'AppBundle:Overview:_subsection.html.twig' with {
                transDomain: translationDomain,
                subSection: 'accounts',
                report: report,
                state: reportStatus.accountsState,
                status: reportStatus.accountsStatus,
                warning: true,
                description: true
            } %}
            {% if (report.accounts is defined and (report.accounts | length > 1)) %}
                <li id="report-submit-section" class="overview-section">
                    {% include 'AppBundle:Overview:_subsection.html.twig' with {
                    transDomain: translationDomain,
                    subSection: 'transfers',
                    report: report,
                    state: "not-started",
                    status: "Not started",
                    warning: true,
                    description: true
                    } %}
                </li>
            {%  else %}
                <li id="report-submit-section" class="overview-section inactive">
                    {% include 'AppBundle:Overview:_subsection.html.twig' with {
                    transDomain: translationDomain,
                    subSection: 'transfersInactive',
                    report: report,
                    state: "not-started",
                    status: "Not started",
                    warning: true,
                    description: true,
                    disableedit: true
                    } %}
                </li>
            {%  endif %}
        
            {% include 'AppBundle:Overview:_subsection.html.twig' with {
                transDomain: translationDomain,
                subSection: 'assets',
                report: report,
                state: reportStatus.assetsState,
                status: reportStatus.assetsStatus,
                list: true,
                description: true
            } %}
        </li>
    {% endif %}
    

    <li id="report-submit-section" class="overview-section">
        <h2 class="heading">{{ 'heading.finishYourReport' | trans() }}</h2>  
        {% include 'AppBundle:Overview:_subsection.html.twig' with {
            transDomain: translationDomain,
            subSection: 'actions',
            report: report,
            description: true,
            state: reportStatus.actionsState,
            status: reportStatus.actionsStatus,
            list: true
        } %}
  
        {% if reportStatus.isReadyToSubmit and report.isDue %}
            {% include 'AppBundle:Overview:_subsection.html.twig' with {
                transDomain: translationDomain,
                subSection: 'report_add_further_info',
                report: report,
                description: false,
                state: "not-started",
                status: "Not started"
            } %}
        {%  else %}
            {% include 'AppBundle:Overview:_subsection.html.twig' with {
                transDomain: translationDomain,
                subSection: 'report_add_further_info',
                report: report,
                description: false,
                state: "not-started",
                status: "Not started",
                disableedit: true 
            } %}
        {%  endif %}
    </li>
</ul>

{% if report.isDue == true and reportStatus.isReadyToSubmit == false %}
    {% include 'AppBundle:Components/Page:_page-section-warning.html.twig' with {
        transDomain: translationDomain,
        pageSectionWarning: 'submitWhenReady',
        iconClass: 'icon icon__notification',
        id: 'cannot-submit-warning'
    } %}
{% endif %}


{% if report.isDue == false %}
    {% set endDate = report.getEndDate() | date(" d F Y")  %}
    {% include 'AppBundle:Components/Page:_page-section-warning.html.twig' with {
    transDomain: translationDomain,
    pageSectionWarning: 'warningNotDue',
    transOptions: {'%date%': endDate},
    iconClass: 'icon icon__notification',
    id: 'cannot-submit-warning'
    } %}
{% endif %}
