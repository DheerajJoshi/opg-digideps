{% set translationDomain = "report-mental-capacity" %}
{% trans_default_domain translationDomain %}

{% extends 'AppBundle:Report/Decision:layout.html.twig'  %}

{% block bodyClasses %}decisions client-capacity{% endblock %}

{% block maincontent %}
    <p class="page-section-description">{{ 'page.pageSectionDescription' | trans({}, translationDomain) }}</p>
    
    {% block validationSummary %}
        {{ form_errors_list(form) }}
    {% endblock %}

    {{ form_start(form, {attr: {novalidate: 'novalidate' }}) }}

{#    <div class="form-section"> #}
      <fiedset>
        <legend class="hidden">...</legend>
        {{ form_checkbox_group(form.hasCapacityChanged, 'form.hasCapacityChanged', {
            'fieldSetClass' : 'inline has-capacity-changed',
            'legendClass' : 'form-label',
            'legendText' : 'form.hasCapacityChanged.label' | trans({'%client%': report.client.firstname}, translationDomain),
            'hintText' : 'form.hasCapacityChanged.hint' | trans({'%client%': report.client.firstname}, translationDomain),
            'items': [
                {'labelClass': 'block-label', 'elementClass': '' },
                {'labelClass': 'block-label', 'elementClass': '' }
            ]
        }) }}
        <div id="has-capacity-changed-details-textarea" class="hidden-detail">
          {{ form_input(form.hasCapacityChangedDetails, 'form.hasCapacityChangedDetails', {
              'labelClass': 'required',
              'labelParameters': { '%client%': report.client.firstname },
              'inputClass': 'expanding'
          }) }}
        </div>
    </fieldset>
{#    </div>#}
        
    {% include 'AppBundle:Components/ButtonBar:_start.html.twig' %}
    {{ form_submit(form.save,'form.save') }}
    {% include 'AppBundle:Components/ButtonBar:_end.html.twig' %}

    {{ form_end(form) }}

    <script type="text/javascript">
        $(document).ready(function() {
            new GOVUK.SelectionButtons('.form-group__checkbox-group :radio');
            new opg.RadioHide({
                radio:'.has-capacity-changed input[type=radio]',
                content: '#has-capacity-changed-details-textarea',
                showWithValue: 'changed'
            });
        });
    </script>
    

{% endblock %}


{% block pageBodyFooterNav %}
     {% include 'AppBundle:Components:nextprevious.html.twig' with {
        'previousLink': path("decisions" , {'reportId': report.id }),
        'previousLabel': 'Decisions',
        'nextLink': path("contacts" , {'reportId': report.id }),
        'nextLabel': 'Contacts'
        } %}
{% endblock %}