{% embed 'AppBundle:Layouts:odr_left_nav.html.twig' %}

    {% set translationDomain = "odr-income-benefits" %}
    {% trans_default_domain translationDomain %}

    {% set clientTrans = {'%client%': odr.client.firstname} %}

    {% block pageTitle %}{{ 'page.htmlTitle' | trans }}{% endblock %}
    {% block title %}
        {{ 'page.pageSectionTitle' | trans(clientTrans) }}
    {% endblock %}

    {% block leftcontent %}
        {% include 'AppBundle:Odr/Finance:left-nav.html.twig' %}
    {% endblock %}

    {% block maincontent %}

        <p class="page-section-description">
            {{ 'page.pageDescription' | trans(clientTrans, translationDomain) }}</p>

        {{ form_start(form, {attr: {novalidate: 'novalidate', class: 'expanding-transaction-table form-horizontal' }}) }}
        <div class="sections">
            {% include 'AppBundle:Odr/Finance/IncomeBenefits:_checkboxes.html.twig' with {
            categoryKey: 'stateBenefits',
            formElements: form.stateBenefits,
            } %}

            {% include 'AppBundle:Odr/Finance/IncomeBenefits:_pensions_other_income.html.twig' with {
            categoryKey: 'pensionsOtherIncome',
            } %}

            {% include 'AppBundle:Odr/Finance/IncomeBenefits:_damages.html.twig' with {
            categoryKey: 'pensionsOtherIncome',
            } %}

            {# oneOff #}
            {% include 'AppBundle:Odr/Finance/IncomeBenefits:_checkboxes.html.twig' with {
            categoryKey: 'oneOff',
            formElements: form.oneOff,
            } %}
        </div>

        <div class="save-bar button-bar">
            {{ form_submit(form.save,'form.save', { 'buttonClass': '' }) }}
        </div>

        {{ form_end(form) }}

        <script>
            $(document).ready(function () {
                new GOVUK.ExpandingTransactionTable('.expanding-transaction-table');
                {#new GOVUK.AutoSave({#}
                {#form: $('form.expanding-transaction-table'),#}
                {#statusElement: $('#save-status'),#}
                {#url: '{{ path('accounts_money_save_json', {'reportId': odr.id, 'type': jsonEndpoint}) }}',#}
                {#preprocessor: GOVUK.moneyInOuPreprocessor#}
                {#});#}
//                $('form.expanding-transaction-table button[type="submit"]').hide();

//                $('.add-transaction').removeClass('hidden');

//                $('input.transaction-value').on('blur', function (event) {
//                    GOVUK.formatCurrency(event.target);
//                });

                GOVUK.accountTransactionExpander();
            });
        </script>



    {% endblock %}

    {% block pageBodyFooterNav %}
        {% include 'AppBundle:Components:nextprevious.html.twig' with {
        'previousLink': path("odr_overview" , {'odrId': odr.id }),
        'previousLabel': 'Visits and care',
        'nextLink': path("odr_overview" , {'odrId': odr.id }),
        'nextLabel': 'Money transfers'
        } %}
    {% endblock %}


{% endembed %}
