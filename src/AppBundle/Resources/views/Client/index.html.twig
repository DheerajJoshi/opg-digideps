{% extends 'AppBundle:Components/Page:page-service.html.twig' %}
{% set translationDomain = "client" %}
{% trans_default_domain translationDomain %}

{% if (action == 'edit-client') %}
    {% set hideForm = false %}
    {% set formClass = 'in-page-form' %}
{% else %}
    {% set hideForm = true %}
    {% set formClass = '' %}
{% endif %}

{% block bodyClasses %}your-client-page{% endblock %}

{% block pageTitle %}{{ 'page.htmlTitle' | trans }} {% endblock %}
{% block contentClass %}{{ parent() }} my-client{% endblock %}
{% block title %}{{ client.getFullname }}{% endblock %}

{% block afterTitle %}
    {% if lastSignedIn %}
        <dl class="behat-region-last-loggedin last-logged-in item-data">
            <dt class="item-label">{{ 'page.lastLoggedIn' | trans({}) }}</dt>
            <dd class="item-value">{{ (lastSignedIn | last_loggedin_date_formatter) }}</dd>
        </dl>
    {% endif %}
{% endblock %}

{% block pageBody %}

    {% if newReportNotification %}
        <p class="flash">{{ newReportNotification }}</p>
    {% endif %}
    
    {% if action == 'edit-report' %}
        {% include 'AppBundle:Report:_edit-dates.html.twig' with {
            'form' : editReportDatesForm
        } %}
        <hr class="item-list" />
    {% endif %}
    
    
    {% if action != 'edit-report' and reports is not empty %}
        {% include 'AppBundle:Client:_list-reports.html.twig' with {
        'translationDomain': translationDomain,
        'reports': reports
        } %}
    {% endif %}

    <p class="page-section-description">{{ 'page.pageSectionDescription' | trans({'%client%':report.client.firstname}, translationDomain) }}</p>


    {% if hideForm %}
        {% include 'AppBundle:Client:_show.html.twig' with {
        'translationDomain': translationDomain
        } %}
    {% endif %}

    <div id="edit-client" class="{% if hideForm %}visuallyhidden{% endif %}">
        {% include 'AppBundle:Client:_edit.html.twig' with {
        'form': formEditClient,
        'translationDomain': translationDomain
        } %}
    </div>

{% endblock %}
