{% set translationDomain = "report-account-form" %}

{{ form_errors_list(form) }}

{{ form_start(form, {attr: {id: 'account-form' } }) }}

    {{ form_input(form.accountType, 'accountForm.accountType') }}
    {{ form_input(form.bank, 'accountForm.bank') }}

    {{ form_input(form.accountNumber, 'accountForm.accountNumber', {
        'inputClass' : 'account-number'
    }) }}
    
    <div id="account_sortcode_block">
    {{ form_sort_code(form.sortCode, 'accountForm.sortCode', {
        'inputType' : 'Number'
    }) }}
    </div>
    
    {{ form_input(form.openingBalance, '', {
        'labelText': 'accountForm.openingBalance.label' | trans({'%startDate%': report.startDate | date("j F Y")}, translationDomain),
        'inputPrefix' : '£',
        'inputClass' : 'form-control__number'
    } ) }}
    {{ form_input(form.closingBalance, 'accountForm.closingBalance', {
        'labelText': 'accountForm.closingBalance.label' | trans({'%endDate%': report.endDate | date("j F Y")}, translationDomain),
        'inputPrefix' : '£',
        'inputClass' : 'form-control__number'
    } ) }}

    {% include 'AppBundle:Components/ButtonBar:_save_bar.html.twig' with {
    transDomain: translationDomain,
    section: 'account'
    } %}

    {{ form_end(form) }}

{{ form_end(form) }}

<script>
    $('input.form-control__number').on('blur', function (event) {
        GOVUK.formatCurrency(event.target);
    });
</script>


<script type="text/javascript">
$(document).ready(function() {
    //new GOVUK.SelectionButtons('.form-group__checkbox-group :radio');
    var sortCodeBlock = $('#account_sortcode_block');
    
    $('#account_accountType').change(function() {
        var selectedVal = $(this).val(); 
        if (selectedVal === 'postoffice' || selectedVal === 'cfo') {
            sortCodeBlock.hide();
        } else {
            sortCodeBlock.show();
        }
    }).trigger('change');
    
});
</script>
