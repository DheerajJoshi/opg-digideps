{% extends 'AppBundle:Layouts:application_new.html.twig' %}

{% import 'AppBundle:Macros:macros.html.twig' as macros %}

{% set translationDomain = "report-assets" %}
{% trans_default_domain translationDomain %}

{#{% set groupString = ('form.group.entries.' ~ transaction.group) | trans %}#}
{#{% set categoryString = ('form.category.entries.' ~ transaction.category ~ '.label') | trans %}#}
{% set transOptions = {'%client%': report.client.firstname} %}

{% block htmlTitle %}{{ 'stepPageProperty.htmlTitle' | trans(transOptions) }}{% endblock %}
{% block pageTitle %}
        {{ 'stepPageProperty.pageSectionTitle' | trans(transOptions) }}
{% endblock %}
{% block pageTitleClass %}heading-large{% endblock %}

{% block supportTitleTop %}
    <span class="heading-secondary">{{ 'stepPageProperty.supportTitle' | trans }}</span>
{% endblock %}

{% block linkBack %}
    {{ macros.linkBackStep(backLink, 'stepPage.backLink' | trans({}, 'common')) }}
{% endblock %}

{% block pageContent %}
    {{ form_start(form, {attr: {novalidate: 'novalidate' } }) }}


    {#<div class="form-section">#}
    {{ form_input(form.address, 'form.property.address') }}

    {{ form_input(form.address2, 'form.property.address2', {
        'labelClass': 'hidden'
    }) }}

    {{ form_input(form.county, 'form.property.county') }}

    {{ form_input(form.postcode, 'form.property.postcode', {'inputClass': 'form-control__postcode' }) }}
    {#</div>#}

    {#<div class="form-section">#}
    {{ form_input(form.occupants, 'form.property.occupants') }}
    {#</div>#}

    {#<div class="form-section">#}
    {{ form_checkbox_group(form.owned, 'form.property.owned', {
        'labelParameters': {'%client%': report.client.firstname},
        'fieldSetClass' : 'inline owned_radio'
    }) }}
    <div id="owned_percentage_textarea" class="hidden-detail">
        {{ form_input(form.ownedPercentage, 'form.property.ownedPercentage', {
            'inputPrefix' : '%',
            'inputClass' : 'form-control__number',
            'labelParameters': {'%client%': report.client.firstname},
        }) }}
    </div>
    {#</div>#}

    {#<div class="form-section">        #}
    {{ form_checkbox_group(form.isSubjectToEquityRelease, 'form.property.isSubjectToEquityRelease', {
        'fieldSetClass' : 'inline'
    }) }}
    {#</div>#}

    {#<div class="form-section">#}
    {{ form_input(form.value, 'form.property.value', {
        'inputPrefix' : '£',
        'inputClass' : 'form-control__number'
    } ) }}
    {#</div>#}

    {#<div class="form-section">#}
    {{ form_checkbox_group(form.hasMortgage, 'form.property.hasMortgage', {
        'fieldSetClass' : 'inline has_mortgage_radio'
    }) }}
    <div id="mortgage_outstanding_amount_textarea" class="hidden-detail">
        {{ form_input(form.mortgageOutstandingAmount, 'form.property.mortgageOutstandingAmount', {
            'inputPrefix' : '£',
            'inputClass' : 'form-control__number'
        }) }}
    </div>
    {#</div>#}

    {#<div class="form-section">        #}
    {{ form_checkbox_group(form.hasCharges, 'form.property.hasCharges', {
        'fieldSetClass' : 'inline'
    }) }}
    {#</div>#}

    {#<div class="form-section">    #}
    {{ form_checkbox_group(form.isRentedOut, 'form.property.isRentedOut', {
        'fieldSetClass' : 'inline is_rented_out_radio'
    }) }}

    <div id="rent_info" class="hidden-detail">
        {{ form_known_date(form.rentAgreementEndDate, 'form.property.rentAgreementEndDate', {
            'showDay': 'false'
        }) }}

        {{ form_input(form.rentIncomeMonth, 'form.property.rentIncomeMonth', {
            'inputPrefix' : '£',
            'inputClass' : 'form-control__number'
        }) }}
    </div>
    {#</div>#}

    <script type="text/javascript">
        $(document).ready(function() {
            new opg.RadioHide({
                radio:'.owned_radio input[type=radio]',
                content: '#owned_percentage_textarea',
                hideByDefault: true,
                showWithValue: 'partly'
            });

            new opg.RadioHide({
                radio:'.has_mortgage_radio input[type=radio]',
                content: '#mortgage_outstanding_amount_textarea',
                hideByDefault: true,
            });

            new opg.RadioHide({
                radio:'.is_rented_out_radio input[type=radio]',
                content: '#rent_info',
                hideByDefault: true,
            });
        });
    </script>


    {{ form_submit(form.save,'form.save') }}



    {{ form_end(form) }}

{% endblock %}
