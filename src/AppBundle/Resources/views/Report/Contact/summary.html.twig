{% extends 'AppBundle:Layouts:application_new.html.twig' %}

{% import 'AppBundle:Macros:macros.html.twig' as macros %}

{% set translationDomain = "report-contacts" %}
{% trans_default_domain translationDomain %}
{% set transOptions = {'%client%': report.client.firstname} %}

{% block htmlTitle %}{{ 'summaryPage.htmlTitle' | trans }}{% endblock %}
{% block pageTitle %}{{ 'summaryPage.pageSectionTitle' | trans }}{% endblock %}

{% block breadcrumbs %}
    {{ macros.breadcrumbs(report) }}
{% endblock %}

{% block pageContent %}

    {# http://hzaiwi.axshare.com/#g=1&p=contacts_-_list_of_contacts___save_confirm] #}

    <div class="text">
        <p>{{ 'startPage.pageSectionDescription1' | trans(transOptions) }}</p>
        <p>{{ 'startPage.pageSectionDescription2' | trans(transOptions) }}</p>
    </div>

    <div class="form-group button-bar">
        <a href="{{ path('contact_add', { 'reportId': report.id}) }}" class="button ">
            {{ 'summaryPage.addButton' | trans }}
        </a>
    </div>

    {% if report.reasonForNoContacts %}
        <p>Reason for no contacts: {{ report.reasonForNoContacts }}
            [<a href="{{ path('contacts_exist', { 'reportId': report.id}) }}">edit</a>]</p>
    {% endif %}

    {% if report.contacts is not empty %}
        {% include 'AppBundle:Report/Contact:_contact_list.html.twig' with {
        'report': report,
        'transDomain': translationDomain
        } %}
    {% else %}
        {#{% if report.reasonForNoContacts is not empty %}#}
        {#{% include 'AppBundle:Report/Contact:_none_reason_description.html.twig' with {'report': report} %}#}
        {#{% else %}#}
        {#<div id="no-contact-reason-form-embed">{{ render(controller('AppBundle:Report/Contact:_noneReasonForm', { 'reportId': report.id, 'request': app.request })) }}</div>#}
        {#{% endif %}#}
    {% endif %}

    {% include 'AppBundle:Report/Contact:_nextprevious.html.twig' %}

{% endblock %}
