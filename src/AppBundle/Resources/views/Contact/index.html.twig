{% embed 'AppBundle:Components/Page:page-report.html.twig' with {
activeTab : "tab-contacts"
} %}

    {% set translationDomain = "report-contacts" %}
    {% trans_default_domain translationDomain %}

    {% block pageTitle %}{{ 'pageTitle' | trans }}{% endblock %}
    {% block contentClass %}{{ parent() }} js-report-contacts-input{% endblock %}

    {% block pageBody %}
        {% include 'AppBundle:Components/Page:_page-section-title.html.twig' with {
        transDomain: translationDomain,
        pageSectionTitle: 'contact_form.pageSectionTitle'
        } %}

        {% include 'AppBundle:Contact:_no_contact_form.html.twig' %}

        {% include 'AppBundle:Components/Page:_page-section-description.html.twig' with {
        transDomain: translationDomain,
        pageSectionDescription: 'contact_form.pageSectionDescription'
        } %}

        {% block validationSummary %}
            {{ form_errors_list(form) }}
        {% endblock %}

        {% if (action == 'add') or (action == 'edit') or (action == 'delete-confirm') %}
            {% set hideForm = false %}
            {% set formClass = 'in-page-form' %}
        {% else %}
            {% set hideForm = true %}
            {% set formClass = '' %}
        {% endif %}

        {% if hideForm or (report.isDue() and action != 'add') %}
            {# Then we need to show the Add Button Link #}
            {% set  params = app.request.attributes.get('_route_params') %}
            {% include 'AppBundle:Components/ButtonBar:_start.html.twig' with {
            buttonBarClass: 'add-bar js-add-contact-button-bar'
            } %}

            {% include 'AppBundle:Components/Link:_link-button.html.twig' with {
            transDomain: translationDomain,
            linkButtonLabel: 'contact_form.addContactButton.label',
            linkClass: 'button-secondary',
            linkHref: path('contacts', {'reportId': params['reportId'], 'action': 'add' })
            } %}

            {% include 'AppBundle:Components/ButtonBar:_end.html.twig' %}
        {% endif %}

       
            {% include 'AppBundle:Contact:_contact_form.html.twig' with {
            'translationDomain': translationDomain
            } %}
      

        {% if contacts is not empty %}
            {% include 'AppBundle:Contact:_listContact.html.twig' %}
        {% endif %}

    {% endblock %}

{% endembed %}
