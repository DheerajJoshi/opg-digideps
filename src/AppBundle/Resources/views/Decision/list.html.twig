{% embed 'AppBundle:Layouts:report_left_nav.html.twig' with {
    'hideReportNav': true
} %}
{% set translationDomain = "report-decisions" %}
{% trans_default_domain translationDomain %}
{% block bodyClasses %}decisions js-report-decisions-input{% endblock %}
{% block pageTitle %}{{ 'page.htmlTitle' | trans }}{% endblock %}
{% block title %}{{ 'page.pageSectionTitle' | trans }}{% endblock %}

{% block backLinktop %}{% endblock %}

{% block leftcontent %}
    {% include 'AppBundle:Decision:left-nav.html.twig'%}
{% endblock %}

{% block maincontent %}
    <p class="page-section-description">{{ 'page.pageSectionDescription' | trans }}</p>

    {% if report.decisions %}
        <p class="page-section-description">{{ 'page.pageSectionEditInfo' | trans }}</p>
    {% else %}
        {% include 'AppBundle:Decision:_decisions_help.html.twig' %}
    {% endif %}

    {% include 'AppBundle:Components/ButtonBar:_add_button_bar.html.twig' with {
            'report': report,
            'section': 'decisions',
            'transDomain': translationDomain,
            'data': report.decisions
        } %}

    {% if decisions is not empty %}
        {% include 'AppBundle:Decision:_decision_list.html.twig' with {
            'report': report,
            'decisions': decisions,
            'transDomain': translationDomain
            } %}
    {% else %}
        {% if report.reasonForNoDecisions is not empty %}
            {% include 'AppBundle:Decision:_none_reason_description.html.twig' with {'report': report} %}
        {% else %}
            <div id="no-decision-reason-form-embed">{{ render(controller('AppBundle:Decision:_noneReasonForm', { 'reportId': report.id, 'request': app.request })) }}</div>        
        {% endif %}
    {% endif %}


{% endblock %}

{% block pageBodyFooterNav %}
    {% include 'AppBundle:Components:nextprevious.html.twig' with {
        'nextLink': path("mental_capacity" , {'reportId': report.id }),
        'nextLabel': 'Mental capacity'
        } %}
{% endblock %}

{% endembed %}