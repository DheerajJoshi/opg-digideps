{% trans_default_domain translationDomain %}

{% block validationSummary %}
    {{ form_errors_list(form) }}
{% endblock %}


{% if (action == 'edit-your-details') %}
    {% set hideForm = false %}
    {% set formClass = 'in-page-form' %}
{% else %}
    {% set hideForm = true %}
    {% set formClass = '' %}
{% endif %}


{% if hideForm %}

    <div itemscope itemtype="http://schema.org/Person" class="item your-details behat-region-my-details">
        
        <a href="{{ path('user_view', {'action': 'edit-your-details' })~'#edit-your-details' }}"
           class="edit-button behat-link-edit-user-details">{{ 'yourDetails.edit'| trans }}</a>
           
       <h2 class="title behat-region-my-details-name" itemprop="name">{{ user.getFullname }}</h2>

        <dl class="item-data item-data-fixed behat-region-my-details">
            <dt class="item-label">{{ 'yourDetails.address' | trans }}</dt>
            <dd class="item-value behat-region-my-details-address" itemprop="address" itemscope
                itemtype="http://schema.org/PostalAddress">
                {% if user.address1 is not empty %}
                    <div itemprop="streetAddress">{{ user.address1 }}</div>
                {% endif %}
                {% if user.address2 is not empty %}
                    <div itemprop="addressLocality">{{ user.address2 }}</div>
                {% endif %}
                {% if user.address3 is not empty %}
                    <div itemprop="addressRegion">{{ user.address3 }}</div>
                {% endif %}
                {% if user.addressPostcode is not empty %}
                    <div itemprop="postalCode">{{ user.addressPostcode }}</div>
                {% endif %}
                {% if user.addressCountry is not empty %}
                    <div itemprop="addressCountry">{{ user.addressCountry | country_name }}</div>
                {% endif %}
            </dd>
            
            <dt class="item-label">{{ 'yourDetails.mainPhoneNumber' | trans }}</dt>
            <dd class="item-value behat-region-my-details-phone-main">{{ user.phoneMain }}&nbsp;</dd>

            <dt class="item-label">{{ 'yourDetails.alternativePhoneNumber' | trans }}</dt>
            <dd class="item-value behat-region-my-details-phone-alt">{{ user.phoneAlternative }}&nbsp;</dd>

            <dt class="item-label">{{ 'yourDetails.emailAddress' | trans }}</dt>
            <dd class="item-value behat-region-my-details-email">{{ user.email }}&nbsp;</dd>
        </dl>
    </div>

{% endif %}

<div id="edit-your-details" {% if hideForm %} class="visuallyhidden" {% endif %}>

    {{ form_start(form, {attr: {novalidate: 'novalidate', class: formClass } }) }}

    {% include 'AppBundle:User:_edit.html.twig' with {
    'form': form,
    'translationDomain': translationDomain
    } %}

    {{ form_end(form) }}


    <form class="in-page-form">

        {% include 'AppBundle:Components/Form:_form-title.html.twig' with {
        formTitle: "form.changeYourEmail.subSectionTitle" | trans
        } %}

        {% include 'AppBundle:Components/Page:_sub-section-description.html.twig' with {
        transDomain: translationDomain,
        subSectionDescription: 'form.changeYourEmail.subSectionDescription'
        } %}

    </form>

</div>
